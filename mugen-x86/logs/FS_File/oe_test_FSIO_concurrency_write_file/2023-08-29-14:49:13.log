+ source ../common_lib/fsio_lib.sh
++ source /root/mugen-riscv/libs/locallibs/common_lib.sh
+++ python3 --version
+++ '[' 0 -eq 0 ']'
+++ source /root/mugen-riscv/libs/locallibs/common_lib_python.sh
++ export 'FS_TYPE=ext3 ext4 xfs'
++ FS_TYPE='ext3 ext4 xfs'
++ export LANG=en_US.UTF-8
++ LANG=en_US.UTF-8
++ REMOVE_VG
++ vggroup=
++ [[ '' != '' ]]
+++ df -T
+++ grep test_vggroup
+++ awk '{print $7}'
++ mounted=
++ [[ '' != '' ]]
++ lsblk
++ grep test_vggroup
++ [[ 1 -eq 0 ]]
++ rm -rf /tmp/point120230829144913 /tmp/point220230829144913 /tmp/point320230829144913
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start environment preparation.'
+ message='Start environment preparation.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Start environment preparation.'
Tue Aug 29 14:49:13 2023 - INFO  - Start environment preparation.
++ date +%Y%m%d%H%M%S
+ cur_date=20230829144913
+ echo 'test create file to read'
+ LOG_INFO 'End of environmental preparation!'
+ message='End of environmental preparation!'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'End of environmental preparation!'
Tue Aug 29 14:49:13 2023 - INFO  - End of environmental preparation!
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Tue Aug 29 14:49:13 2023 - INFO  - Start to run test.
+ CONCURRENCY_THREAD write_file 100
++ date +%s
+ start_time=1693320553
+ command=write_file
+ concurrency_num=100
+ '[' -e /tmp/fd1 ']'
+ mkfifo /tmp/fd1
+ exec
+ rm -rf /tmp/fd1
+ (( i = 0 ))
+ (( i < 9 ))
+ echo ''
+ (( i++ ))
+ (( i < 9 ))
+ echo ''
+ (( i++ ))
+ (( i < 9 ))
+ echo ''
+ (( i++ ))
+ (( i < 9 ))
+ echo ''
+ (( i++ ))
+ (( i < 9 ))
+ echo ''
+ (( i++ ))
+ (( i < 9 ))
+ echo ''
+ (( i++ ))
+ (( i < 9 ))
+ echo ''
+ (( i++ ))
+ (( i < 9 ))
+ echo ''
+ (( i++ ))
+ (( i < 9 ))
+ echo ''
+ (( i++ ))
+ (( i < 9 ))
+ count=1
++ seq 0 100
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=2
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 1
+ sed -i awrite /tmp/testfile20230829144913
+ count=3
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 2
+ sed -i awrite /tmp/testfile20230829144913
+ count=4
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 3
+ sed -i awrite /tmp/testfile20230829144913
+ count=5
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 4
+ sed -i awrite /tmp/testfile20230829144913
+ count=6
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=7
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 5
+ count=8
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ write_file 7
+ sed -i awrite /tmp/testfile20230829144913
+ count=9
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=10
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 9
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ write_file 8
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ write_file 6
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ echo ''
+ count=11
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ echo ''
+ echo ''
+ count=12
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ echo ''
+ count=13
+ echo ''
+ write_file 11
+ for j in $(seq 0 $concurrency_num)
+ write_file 10
+ read -u3
+ write_file 12
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ sed -i awrite /tmp/testfile20230829144913
+ count=14
+ echo ''
+ write_file 13
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ count=15
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=16
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=17
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 16
+ sed -i awrite /tmp/testfile20230829144913
+ count=18
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 15
+ count=19
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sleep 5
+ write_file 14
+ sed -i awrite /tmp/testfile20230829144913
+ sed -i awrite /tmp/testfile20230829144913
+ write_file 18
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ write_file 17
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ echo ''
+ echo ''
+ count=20
+ echo ''
+ echo ''
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ echo ''
+ echo ''
+ echo ''
+ count=21
+ write_file 19
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 20
+ sed -i awrite /tmp/testfile20230829144913
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=22
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 21
+ count=23
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ write_file 22
+ sed -i awrite /tmp/testfile20230829144913
+ count=24
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 23
+ sed -i awrite /tmp/testfile20230829144913
+ count=25
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=26
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=27
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 25
+ sed -i awrite /tmp/testfile20230829144913
+ count=28
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 24
+ sed -i awrite /tmp/testfile20230829144913
+ write_file 27
+ sed -i awrite /tmp/testfile20230829144913
+ write_file 26
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ count=29
+ write_file 28
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=30
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 29
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ echo ''
+ echo ''
+ echo ''
+ echo ''
+ count=31
+ write_file 30
+ sed -i awrite /tmp/testfile20230829144913
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=32
+ for j in $(seq 0 $concurrency_num)
+ write_file 31
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ count=33
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 32
+ count=34
+ write_file 33
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ count=35
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 34
+ sed -i awrite /tmp/testfile20230829144913
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=36
+ for j in $(seq 0 $concurrency_num)
+ sleep 5
+ read -u3
+ echo ''
+ sleep 5
+ count=37
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 35
+ sed -i awrite /tmp/testfile20230829144913
+ write_file 36
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ echo ''
+ count=38
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 37
+ sed -i awrite /tmp/testfile20230829144913
+ count=39
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 38
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ echo ''
+ echo ''
+ count=40
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 39
+ sed -i awrite /tmp/testfile20230829144913
+ count=41
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 40
+ sed -i awrite /tmp/testfile20230829144913
+ count=42
+ echo ''
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=43
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 41
+ sed -i awrite /tmp/testfile20230829144913
+ write_file 42
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=44
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 43
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=45
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 44
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=46
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sleep 5
+ sleep 5
+ write_file 45
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ echo ''
+ count=47
+ write_file 46
+ for j in $(seq 0 $concurrency_num)
+ sed -i awrite /tmp/testfile20230829144913
+ read -u3
+ echo ''
+ count=48
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 47
+ count=49
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ echo ''
+ write_file 48
+ sed -i awrite /tmp/testfile20230829144913
+ count=50
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 49
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=51
+ for j in $(seq 0 $concurrency_num)
+ write_file 50
+ read -u3
+ echo ''
+ sed -i awrite /tmp/testfile20230829144913
+ count=52
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=53
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 52
+ sed -i awrite /tmp/testfile20230829144913
+ write_file 51
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=54
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 53
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=55
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 54
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ echo ''
+ count=56
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 55
+ sed -i awrite /tmp/testfile20230829144913
+ count=57
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 56
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=58
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 57
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ echo ''
+ echo ''
+ count=59
+ write_file 58
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ count=60
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 59
+ sed -i awrite /tmp/testfile20230829144913
+ count=61
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 60
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=62
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 61
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=63
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 62
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=64
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 63
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ count=65
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 64
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=66
+ write_file 65
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=67
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 66
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=68
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 67
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=69
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 68
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=70
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 69
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=71
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 70
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=72
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 71
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=73
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 72
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ echo ''
+ count=74
+ echo ''
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=75
+ write_file 73
+ sed -i awrite /tmp/testfile20230829144913
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 74
+ echo ''
+ sed -i awrite /tmp/testfile20230829144913
+ count=76
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ count=77
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 76
+ sed -i awrite /tmp/testfile20230829144913
+ write_file 75
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=78
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 77
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=79
+ for j in $(seq 0 $concurrency_num)
+ write_file 78
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=80
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 79
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=81
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 80
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=82
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 81
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ count=83
+ for j in $(seq 0 $concurrency_num)
+ write_file 82
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=84
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 83
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=85
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 84
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=86
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 85
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=87
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 86
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=88
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 87
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=89
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 88
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=90
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 89
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=91
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 90
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ count=92
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 91
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ write_file 92
+ sed -i awrite /tmp/testfile20230829144913
+ count=93
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ echo ''
+ count=94
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 93
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=95
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 94
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=96
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 95
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=97
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 96
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=98
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 97
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=99
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 98
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ count=100
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ write_file 99
+ sed -i awrite /tmp/testfile20230829144913
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ sleep 5
+ echo ''
+ echo ''
+ count=101
+ write_file 100
+ for j in $(seq 0 $concurrency_num)
+ read -u3
+ sed -i awrite /tmp/testfile20230829144913
+ count=102
+ wait
+ write_file 101
+ sed -i awrite /tmp/testfile20230829144913
+ echo ''
+ echo ''
+ echo ''
+ echo ''
+ echo ''
+ echo ''
+ echo ''
+ sleep 5
+ sleep 5
+ echo ''
+ echo ''
++ date +%s
+ end_time=1693320618
++ expr 65
+ exec_time=65
+ echo 'Exectue 100 cmd for times: 65'
Exectue 100 cmd for times: 65
+ exec
+ exec
+ grep test /tmp/testfile20230829144913
test create file to read
+ CHECK_RESULT 0 0 0 'Concurrency write file failed.'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Concurrency write file failed.'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Tue Aug 29 14:50:18 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Tue Aug 29 14:50:18 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Tue Aug 29 14:50:18 2023 - INFO  - Start to restore the test environment.
+ rm -f /tmp/testfile20230829144913
+ LOG_INFO 'End to restore the test environment.'
+ message='End to restore the test environment.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'End to restore the test environment.'
Tue Aug 29 14:50:18 2023 - INFO  - End to restore the test environment.
